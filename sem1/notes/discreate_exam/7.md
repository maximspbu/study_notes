# 7. Теорема Дилуорса.

### *Теорема Дилуорса.*
$A~–~$конечное частично упорядоченное множество, а $m$ $-$ наименьшее число непересекающихся цепей, которыми может быть покрыто множество $A$. $M~-~$наибольшая мощность антицепи в $A$. 
Тогда $M = m$ (размер наибольшей антицепи равен размеру наименьшего разбиения на непересекающиеся цепи).

### Доказательство:
Длина любой антицепи $c$ не больше количества цепей в любом разбиении $\Lambda$. Докажем этот факт от противного:
Предположим, что существует $\Lambda:|c|>|\Lambda|$. Тогда по принципу Дирихле какая-то пара из $c$ находится в одной цепи из $\Lambda$ $?!~~\tiny\blacksquare$

### Примечание. 
Элементы антицепи должны находиться в разных цепях, иначе цепи $-$ не цепи, но тогда, так как длина антицепи больше разбиения на цепи, то цепей не хватит на все элементы антицепи, а значит два элемента антицепи будут находиться в одной цепи, что противоречит линейности отношения.

### Из этого факта можно получить формулировку теоремы:
$\forall c:|c|\le|c_{max}|,~\forall\Lambda:|\Lambda_{min}|\le|\Lambda|$ знаем $|c|\le|\Lambda|\Rarr |c_{max}|\le|\Lambda_{min}|$
Докажем, что $|c_{max}|=|\Lambda_{min}|$, то есть $M=m$ по индукции:

База индукции: $|A|=1$.
База выполняется, так как имеем единственную цепь и единственную антицепь длины 1.

Индукционный переход: $|A|=n\ge 2$. Для $|A|<n$ теорема доказана.
Пусть $t~-~$максимальный элемент в $A$.
По индукционному предположению известно, что $A\setminus\set{t}$ разбивается на цепи $C_1,...,C_k$ и при этом есть хотя бы одна антицепь длины $k$.
Каждая цепь, пересекается с антицепью длины $k$ ровно по одному элементу (ни больше, ни меньше), иначе получаем противоречие, так как в одной цепи будет находится несколько элементов антицепи.
Для каждой цепи $C_i$ определим максимальный элемент $c_i$, который лежит хотя бы в одной антицепи длины $k$.
Докажем, что $Y=\set{c_1,...,c_k}~-~$антицепь.
Так как каждый $c_i$ состоит в какой-то антицепи, мы можем определить для них $Y_i~-~$какая-то антицепь, в которой они находятся.
Используя тот факт, что каждая цепь пересекается с антицепью длины $k$ровно по одному элементу, обозначим $Y_i\cap C_j=\set{y_{ij}}$ при $i\ne j$.
Известно, что $(y_{ij},c_j)\in R$, так как они принадлежат одной цепи $C_j$ и $c_j$ является максимальным элементом, входящим в антицепь размера $k$, в этой цепи.
Предположим, что $(c_j,c_i)\in R$. Тогда по транзитивности получим $(y_{ij},c_i)\in R$, но $y_{ij}\in Y_i$ и $c_i\in Y_i$, и $Y_i~-~$антицепь $?!\Rarr$ $(c_j,c_i)\not\in R$.
Таким образом, мы доказали, что $Y~-~$является антицепью длины $k$.
Теперь вспомним про $t~-~$максимальный элемент в $A$.
Так как он максимальный, не существует $i\in1:k~|~(t,c_i)\in R$.
Рассмотрим 2 случая:
$1)$ $\forall i\in1:k~|~(c_i, t)\not\in R$
Тогда $Y\cup\set{t}~-~$антицепь длины $k+1$, а $\set{C_1,...,C_k,\set{t}}~-~$разбиение на цепи длины $k+1$.
$2)$ $\exist i\in1:k~|~(c_i, t)\in R$
Рассмотрим множество $X=\set{x\in C_i:(x,c_i)\in R}\cup\set{t}$, которое является цепью по построению (сужение цепи + элемент, для которого применяем транзитивность).
Так как $c_i$ по определению $-$ максимальный элемент из $C_i$, содержащийся в антицепи длины $k$, то в $X$ находятся все элементы, которые принадлежат какой-то антицепи длины $k$.
Тогда $A\setminus X$ не может содержать антицепи длины $k$, но точно содержит антицепь длины $k-1$, это $Y\setminus\set{c_i}$.
По индукционному предположению $A\setminus X$ разбивается на $k-1$ цепь.
Тогда, добавив цепь $X$, получим разбиение на $k$ цепей, имея антицепь $Y$ длины $k$  $\scriptsize\blacksquare$