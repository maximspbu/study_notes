---  
layout: mathjax  
---  
  
# 3. Топологическая сортировка. Минимальные и максимальные элементы. Теорема о существовании топологической сортировки.  
  
### *Определение. Минимальный/наименьший элементы.*  
$A~-~$множество, упорядоченное (строгим) частичным порядком $R$.  
$m\in A~-~$минимальный элемент, если $\not\exists x\ne m\in A:(x,m)\in R$.  
$m_o\in A~-~$наименьший элемент, если $\forall x\ne m_o\in A ~~ (m_o, x)\in R$.  
  
### *Определение. Максимальный/наибольший элементы.*  
$A~-~$множество, упорядоченное (строгим) частичным порядком $R$.  
$M\in A~-~$максимальный элемент, если $\not\exists x\ne M\in A:(M,x)\in R$.  
$M_o\in A~-~$наибольший элемент, если $\forall x\ne M_o\in A ~~ (x, M_o)\in R$.  
  
### *Замечание.* В частично упорядоченном множестве минимальных/максимальных элементов может быть несколько, но наименьших/наибольших не более одного.  
  
### *Замечание.* В линейно упорядоченном множестве минимальный/максимальный элемент всего один и совпадает с наименьшим/наибольшим.  
  
### *Лемма о существовании минимального элемента.*  
Во всяком конечном частично упорядоченном непустом множестве $X$ существует минимальный элемент.  
  
### Доказательство:  
База индукции: $|X|=1$, то есть $X=\\{x\\}$.  
Очевидно, что минимальный элемент существует и равен $x$.  
Индукционный переход. Для $|X|=n$ лемма доказана.  
Пусть $|X|=n+1,n\ge1$. Рассмотрим $Y=X\setminus\\{x\\}$, где $x~-~$произвольный элемент множества $X$.  
По индукционному предположению в $Y$ есть минимальный элемент. Назовём его $y$. Если $(x, y)\in R$, то $x~-~$минимальный элемент $X$, так как $\forall x'\in X ~~ (x',x)\not\in R$ ввиду транзитивности с $y$, иначе $y$ остаётся минимальным элементом  $\scriptsize\blacksquare$  
  
### *Определение. Топологическая сортировка.*  
Топологической сортировкой множества $A$ (строго) частично упорядоченного отношением $R$ называется такой (строгий) линейный порядок $Q$, что $(a,b)\in R\Rightarrow(a,b)\in Q$.  
  
### Примечание. То есть мы модифицируем отношение так, что добавляются новые связи между элементами, которые дополняют отношение до линейного (получаем какое-то новое отношение).  
  
### *Теорема о существовании топологической сортировки.*  
У любого конечного частично упорядоченного отношением $R$ множества $A$ существует топологическая сортировка.  
  
### Доказательство:  
Обозначим $A_0:=A$ и организуем итерационный процесс “упорядочивания” $A$ через конструирование множеств $A_i$, таких что при $A_i=\varnothing\Rightarrow$ его топологическая сортировка  $T_i=\varnothing$.  
Если $A_i\ne\varnothing$, то по лемме о существовании минимального элемента есть минимальный элемент $m_i$.  
Определим $A_{i+1}:=A_i\setminus\\{m_i\\}$ и $T_i:=\\{(m_i,a):a\in A_{i+1}\\}\cup T_{i+1}$.  
  
### Примечание.  
Если порядок нестрогий, то в $T_{i}$ нужно еще добавить $(m_i,m_i)$, так как должна выполняться рефлексивность.  
  
### Докажем, что $T_i$ является топологической сортировкой для $A_i$, то есть $T=T_0$ является топологической сортировкой для $A_0=A$.  
Для этого потребуется лемма:  
  
### Лемма. Если $(a,b)\in R$, то $\exists i\le j\in0:(|A|-1)~|~a=m_i, b=m_j$, где $i,j~-$ итерации построения топологической сортировки.  
  
### Доказательство:  
Существование таких $i, j$ следует из способа построения $T$.  
При этом $i\le j$, так как при $i >j$ получим, что $a\in A_j$ и $a \ne b\Rightarrow b\ne m_j$, так как $(a,b)\in R$ .  
Так как $i\le j$, то $b\in A_i\Rightarrow (a,b)\in T_i\Rightarrow(a,b)\in T$  
Таким образом, мы доказали последнее условие топологической сортировки  $\scriptsize\blacksquare$  
  
### Продолжение доказательства теоремы:  
Теперь докажем, что $T$ задаёт линейный порядок.  
$1)$ Рефлексивность по построению (смотреть ласт примечание).  
$2)$ Транзитивность.  
Рассмотрим попарно различные $\forall a,b,c\in A: (a,b)\in T, (b,c)\in T$.  
По построению $T$ существуют $i,j,k:a=m_i, b=m_j, c=m_k$.  
При этом $i<j$ и $j< k$. Тогда $i<k\Rightarrow c\in A_i\Rightarrow (a,c)\in T$.  
$3.1)$ Антисимметричность (для нестрогого порядка).  
Предположим, что есть $a,b\in A:(a,b)\in T, (b,a)\in T$.  
Тогда по построению $T$ существуют $i,j:a=m_i, b=m_j$.  
Так как $(a,b)\in T$, то $i \le j$, но $i\ge j$, так как $(b,a)\in T$.  
Значит $i=j\Rightarrow a=b$.  
$3.2)$ $Ass$иметричность (для строго порядка).  
Предположим, что $(a,b)$ $\in$ $T$. Тогда по построению $T$ существуют $i,j$  такие, что $a = m_i, b = m_j$. Значит $i<j$, иначе $a \in A_j \Rightarrow b \ne m_j$.  
Тогда $ ~~  (b,a) \notin T ~~ $.  
  
### Примечание.  
Знак неравенств нестрогий только в том случае, если требуется рефлексивность, то есть задан нестрогий порядок.  
  
### $4)$ Линейность:  
По построению $T$ $\forall a,b\in A ~~ \exists i,j:a=m_i,b=m_j$.  
Если $i < j$, то $(a,b)\in T$, иначе $(b,a)\in T$ по построению  $\scriptsize\blacksquare$  
  
### Пример топологической сортировки  
  
### $A=\\{1, 2, 3, 4\\}$  
$R=\\{(1, 3), (1, 4), (2, 3), (2,4), (3,4)\\}$  
  
![Untitled]({{ site.baseurl }}/sem1/семестр/Экзамен по дискретной математике/3 Топологическая сортировка Минимальные и максимал/Untitled.png)  
  
### Здесь есть 2 варианта сортировки, так как имеется 2 минимальных элемента: $1$ и $2$.  
$A_0=A=\\{1, 2, 3, 4\\};m_0=1$  
$A_1=\\{2,3,4\\}; T_0=\\{(1, 2), (1,3), (1,4)\\}\cup T_1;m_1= 2$  
$A_2=\\{3, 4\\}; T_1=\\{(2,3),(2,4)\\}\cup T_2; m_2=3$  
$A_3=\\{4\\};T_2=\\{(3,4)\\}\cup T_3;m_3=4$  
$A_4=\varnothing;T_3=\varnothing$  
Тогда $T=\\{(1,2),(1,3),(1,4),(2,3),(2,4),(3,4)\\}$  
